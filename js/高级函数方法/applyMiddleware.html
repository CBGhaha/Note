<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<body>
    
</body>
<script>
    function compose(funList){
        return funList.reduce(function (a,b){
            //这里为什么要用一个function 套着 a(b())？ 为了简单的将compose后的函数 接受的argn 传递给 b()
            return function(...args){
                return a(b(...arg))
            }
         })
    }
    function applyMiddleware(...middlewares){
        return (createStore)=>(reducer,preloadedState)=>{
            var store=createStore(reducer,preloadedState);
            const {getState,dispatch}=store;
            const middleware={
                getState: getState,
                dispatch: (action) => dispatch(action)
            }
            var chain=middlewares.map((item)=>{
                item(middleware)
            });
            var newDispatch= compose(chain)(dispatch);
            return {
                ...store,
                dispatch:newDispatch

            }

        }
    }
[A1,A2,A3]

A1,A2 ;sum; args=>A1(A2(args))
sum, A3;args1=>sum(A3(args1))
var a=function(args){
    return A1(A2(args))
}
var b=function (args1){
    return !function(args){
        return A1(A2(args))
        }(A3(args1))
}
var c=function (args2){
    return !function (args1){
    return !function(args){
        return A1(A2(args))
            }(A3(args1))
    }(A4(args2))
}
var c=arg2=>A1(A2(A3(A4(args2))))
</script>
</html>