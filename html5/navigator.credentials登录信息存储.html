<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>
      <div onclick="saveAccount()">保存账号</div>
      <div onclick="deleteAccount()">删除保存账号</div>
  </body>
</html>
<script type="text/javascript">
  //https://lavas.baidu.com/pwa/automatic-login/credential-management-api/introduction
  //将用户的登录信息和密码保存起来 并在用户登陆的时候调用 做到保存账号密码的作用
  //目前只有 chrome支持
  //判断浏览器是否支持
  function saveAccount(){
    console.log(111)
    if(navigator.credentials){
      var cred=new PasswordCredential({
        id:'ID2',
        password:'mima',
        name:'用户名2',
        iconUrl:'https://gss0.baidu.com/7Ls0a8Sm2Q5IlBGlnYG/sys/portrait/item/6996e69cbae599a8e78cab39393338ba4f'
      })
       var promise = navigator.credentials.store(cred);
    }else{
      console.log('不支持')
    }
  }

  if (navigator.credentials) {
    navigator.credentials.get({
        password: true
    }).then(account=>{
      console.log(account)
    })
  }

  function deleteAccount(){
    if (navigator.credentials.requireUserMediation) {
        navigator.credentials.requireUserMediation();
    }
    else if (navigator.credentials.preventSilentAccess) {
        navigator.credentials.preventSilentAccess().then(res=>{console.log(res)});
    }
  }

</script>
